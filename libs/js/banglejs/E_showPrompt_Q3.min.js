(function(q,f){f||(f={});f.buttons||(f.buttons={Yes:!0,No:!1});var m=require("locale"),n=Object.keys(f.buttons),r=[];g.clear(1);Bangle.drawWidgets();if(!q)return Bangle.setUI(),Promise.resolve();(function(){g.reset().setFont("6x8",2).setFontAlign(0,0);var h=g.getWidth(),k=g.getHeight(),a=f.title;a&&(a=m.translate(a),g.drawString(a,h/2,34),a=(g.stringWidth(a)+16)/2,g.fillRect(h/2-a,44,h/2+a,44));a=q.split("\n");var p=(k-16*a.length)/2;a.forEach((e,l)=>g.drawString(m.translate(e),
h/2,p+16*l));var t=0;n.forEach(e=>t+=24+g.stringWidth(m.translate(e)));var b=(h-t)/2,d=k-40;n.forEach((e,l)=>{e=m.translate(e);l=g.stringWidth(e);b+=(24+l)/2;var c=6+l/2;r.push({x1:b-c,x2:b+c,y1:d-24,y2:d+24});c=[b-c,d-16,b+c,d-16,b+c+4,d-12,b+c+4,d+12,b+c,d+16,b-c,d+16,b-c-4,d+12,b-c-4,d-12,b-c,d-16];g.setColor(g.theme.bg2).fillPoly(c).setColor(g.theme.fg2).drawPoly(c).drawString(e,b,d+1);b+=(24+l)/2});g.setColor(g.theme.fg).flip()})();return new Promise(h=>{Bangle.setUI("touch",k=>{r.forEach((a,
p)=>{k.x>=a.x1&&k.x<=a.x2&&k.y>=a.y1&&k.y<=a.y2&&(E.showPrompt(),h(f.buttons[n[p]]))})})})})